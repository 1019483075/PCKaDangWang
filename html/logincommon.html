
<style type="text/css">
	*{ margin: 0; padding: 0;}
	ul,ol,li{ list-style: none;}
	a{ text-decoration: none;}
	#loginBox{ width: 1000px; height: 600px; position: fixed;top: 0;
	right: -1000px; z-index: 100;}
	#colse1{ width:40px; height:40px; background-color:#e14835!important;
	 background: url(../img/closePop.gif) no-repeat center center; cursor: pointer;}
	#noLogin{ width: 200px; height: 290px; margin-top: 33px; float: left;border-right: 1px solid #e8e8e8;
	font-size: 12px; color: #666666; padding-left:180px ;}
		#noLogin p{ color: #999999; font: 13px/22px "微软雅黑";}
		#noLogin .noLogin{ font:16px/24px "微软雅黑"; color: #333333;}
		#noLogin ul{ overflow: hidden; margin-top: 15px;}
		#noLogin ul li{ float: left; width: 60px; cursor: pointer;}
		#noLogin ul li .ico{ width: 44px; height: 44px;  background:url(../img/login.png) no-repeat ;}
		#noLogin ul li .ico1{ background-position: 0 -69px;margin: 0 auto;}
		#noLogin ul li .ico2{ background-position: 0 -138px;margin: 0 auto;}
		#noLogin ul li span{ display: block; width: 60px; text-align: center; line-height: 22px;color: #333333;}
		#noLogin ul li .sian{ text-align: left; text-indent: 10px; }
	#mustLogin{ width: 304px; float: left; height: 290px; margin-top: 33px; overflow: hidden;
	padding-left: 26px;}
		#mustLogin .login{font:16px/24px "微软雅黑" !important; color: #333333!important; margin-top: 10px;}
		#mail1,#pd1{ width: 300px; height: 34px; margin-top: 35px; border: 1px solid #d8d8d8;
		border-radius:3px;}
		#mail1 span,#pd1 span{ width: 13px; height: 9px; float: left; margin: 12px 5px;
		 background: url(../img/login.png) no-repeat 0 -215px;}
		#pd1 span{ background-position: 0 -246px; height: 15px; margin-top: 10px;}
		#mail1 input,#pd1 input{ outline: none; width: 265px; margin-top: 8px; margin-left: 3px;
		border: none;}
		#mustLogin .deal1{ margin-top: 25px; font: 12px/22px "微软雅黑"; color: #333333; cursor: pointer; overflow: hidden;}
		#mustLogin .deal1 a{ line-height: 18px;  margin-left: 4px;}
		#mustLogin .sub1{ width: 300px; height: 34px; text-align: center; font: bold 16px/34px "微软雅黑";
		 color: #FFFFFF; background: #f6614b; border: none; border-radius:3px ; outline: none; margin-top: 5px;}
		#mustLogin .haved1{ font: 14px/36px "微软雅黑"; float: left;}
		#mustLogin .haved1 span{ color: #999999; cursor: pointer;}
		#mailInfo1,#pdInfo1{ display: block; float: right; color: #f6614b; font-size: 12px;}
		#loginBox .forgetPwd{ font: 14px/36px "微软雅黑"; float: right; color: #999999; cursor: pointer;}
</style>
<div id="loginBox">
	<div id="colse1"></div>
	<div id="noLogin">
		<p class="noLogin">无需注册</p>
		<p>直接使用社交账号登录</p>
		<ul>
			<li id="sina">
				<div class="ico ico0"></div>
				<span class="sian">微博</span>
			</li>
			<li id="QQ">
				<div class="ico ico1"></div>
				<span>QQ</span>
			</li>
			<li id="zhifubao">
				<div class="ico ico2"></div>
				<span>支付宝</span>
			</li>
		</ul>
	</div>
	<div id="mustLogin">
		<form action="" method="post">
			<p class=".login" style="font:16px/24px '微软雅黑';color: #333333;">用户登录</p>
			<div id="mail1">
				<span></span>
				<input type="text" name="username" placeholder="邮箱/用户名"  class="getfocus1" id="username1" />
			</div>
			<span id="mailInfo1"> </span>
			
			<div id="pd1">
				<span></span>
				<input type="password" name="pwd1" id="pwd1" placeholder="密码"  class="getfocus1"/>
			</div>
			<span id="pdInfo1"></span>
			
			<p class="deal1" style="font:16px/24px '微软雅黑';color: #333333;"><label><input type="checkbox" checked="checked" id="autoLogin"/><a>下次自动登录</a></label></p>
			<input type="submit" value="立即登录" name="sub1" class="sub1" />
			<p class="haved1" style="font:16px/24px '微软雅黑';color: #333333;">已有账号?<span class="changeToRigest"  style="font-size: 14px;">注册</span></p>
			<p class="forgetPwd" style="font-size: 14px;"><a>忘记密码？</a></p>
		</form>
		
	</div>
</div>
<script src="../js/jquery-2.2.3.min.js" type="text/javascript" charset="utf-8"></script>
<script type="text/javascript">
	$("#sina").click(function(){
		location.href="https://api.weibo.com/oauth2/authorize?client_id=3775846575&redirect_uri=http%3A%2F%2Fwww.kadang.com%2Fapi.php%3Fact%3Dtosina%26op%3Dg&response_type=code";
	}).hover(function(){
		$(this).children().filter("span").css("color","red");
	},function(){
		$(this).children().filter("span").css("color","");
	})//微博
	$("#QQ").click(function(){
		location.href="https://graph.qq.com/oauth/show?which=Login&display=pc&response_type=code&client_id=100233683&redirect_uri=http%3A%2F%2Fwww.kadang.com%2Fapi.php%3Fact%3Dtoqq%26op%3Dg&state=7abaf9ffeb28b13c821d75fee8dc28a2&scope=get_user_info";
	}).hover(function(){
		$(this).children().filter("span").css("color","red");
	},function(){
		$(this).children().filter("span").css("color","");
	})//QQ;
	$("#zhifubao").click(function(){
		location.href="https://auth.alipay.com/login/express.htm?goto=https%3A%2F%2Fmemberexprod.alipay.com%3A443%2Fauthorize%2FuserAuthQuickLoginAction.htm%3Fe_i_i_d%3Dfe755e540ac685fcc2401f0370d8ce30";
	}).hover(function(){
		$(this).children().filter("span").css("color","red");
	},function(){
		$(this).children().filter("span").css("color","");
	});//支付宝
	$("#colse1").click(function(){
		$("#registBox").animate({
			right:"-1000px"
		},500).css("display","block");
		$("#bigBox").css("display","none");
		$("#loginBox").animate({
			right:"-1000px"
		},500).css("display","block");
		$("#mailInfo1").add("#pdInfo1").html("");
		$(".getfocus1").val("");
	})//关闭注册页面
	var mailReg1=/^\w+@[a-zA-Z0-9]+\.[a-z]{2,4}$/;
	var pwdReg1=/^.{6,20}$/;
	$(".getfocus1").eq(0).focus(function(){
		$(this).parent().css("box-shadow","0 0 0px 1px rgba(255,4,4,1)");
	}).blur(function(){
		$(this).parent().css("box-shadow","");
		if($(this).val()==""){
			$("#mailInfo1").html("邮件/用户名不能为空！");
		}else if(!mailReg.test($(this).val())){
			$("#mailInfo1").html("格式不正确，请输入邮件格式！");
		}else{
			$("#mailInfo1").html("");
		}
	});//
	$(".getfocus1").eq(1).focus(function(){
		$(this).parent().css("box-shadow","0 0 0px 1px rgba(255,4,4,1)");
	}).blur(function(){
		$(this).parent().css("box-shadow","");
		if($(this).val()==""){
			$("#pdInfo1").html("密码不能为空！");
		}else if(!pwdReg.test($(this).val())){
			$("#pdInfo1").html("密码长度需介于 6 和 20 之间");
		}else{
			$("#pdInfo1").html("");
		}
	});//
	$(".deal1").hover(function(){
		$(this).children().wrap("<u></u>")
	},function(){
		$(this).children().remove();
		$("<label><input type='checkbox' checked='checked'/><a>下次自动登录</a></label>").appendTo($(this))
	})//
	$(".sub1").click(function(){
		if($(".getfocus1").eq(1).val()==""){
			$("#pdInfo1").html("密码不能为空！")
		};
		if($(".getfocus1").eq(0).val()==""){
			$("#mailInfo1").html("邮箱不能为空！")
		};
		/**/
		var flag1=false;
		var flag2=false;
		if(document.cookie){
			var reg=/\s+/g;
			var res=document.cookie.replace(reg,"").split(";");
			for (var i=0;i<res.length;i++) {
				var arr=res[i].split("=")
				var arr1=JSON.parse(arr[1])
				if(($("#username1").val().replace(/\s+/g,"")==arr1.username)&&($("#pwd1").val().replace(/\s+/g,"")==arr1.pwd)){
					flag1=true;
					break;
				}
			}
		}//判断用户名和密码是否一致
		
		if(document.cookie){
			var reg=/\s+/g;
			var res=document.cookie.replace(reg,"").split(";");
			for (var i=0;i<res.length;i++) {
				var arr=res[i].split("=")
				var arr1=JSON.parse(arr[1])
				if(($("#username1").val().replace(/\s+/g,"")==arr1.username)){
					flag2=true;
					break;
				}
			}
		}//判断用户名是否存在
		var flag4=false;
		if((($(".getfocus1").eq(1).val()=="") || !(pwdReg.test($(".getfocus1").eq(1).val()))) || (($(".getfocus1").eq(0).val()=="") || !(pwdReg.test($(".getfocus1").eq(0).val())))   ){
			return false;
			$(".getfocus1").eq(0).parent().css("box-shadow","0 0 0px 1px rgba(255,4,4,1)");
		}else if(flag1){
			$(".userInfo").html($("#username1").val());
			$(".login #wecolme1").css("display","none");
			$(".login #wecolme2").css({
				"display":"block",
			});
			$("#registBox").add("#loginBox").animate({
				right:"-1000px"
			},100).css("display","block")
			$("#bigBox").css("display","none");
			
			return false;
		}else if(!flag2){
			$("#mailInfo1").html("用户名不存在");
			return false;
		}else{
			$("#mailInfo1").html("请输入正确的用户名或密码") ;
			return false;
		}
	});//登录按钮点击
	$(".sub1").hover(function(){
		$(this).css("background","red")
	},function(){
		$(this).css("background","")
	})
	$("#loginBox").click(function(){
		$(".getfocus1").css("box-shadow","")
	});
	$(".forgetPwd").hover(function(){
		$(this).children().wrap("<u></u>").css("color","red");
	},function(){
		$(this).children().remove();
		$("<a>忘记密码？</a>").appendTo($(this));
	}).click(function(){
		location.href="http://www.kadang.com/index.php?act=login&op=forget_password";
	});
	
</script>
